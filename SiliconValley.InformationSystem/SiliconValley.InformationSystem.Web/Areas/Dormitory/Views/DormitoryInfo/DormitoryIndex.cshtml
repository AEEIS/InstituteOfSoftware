
@{
    ViewBag.Title = "DormitoryIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style>
    #top {
        width: 99%;
        height: 50px;
        border: 1px solid pink;
    }


    #bottom {
        border: 1px solid pink;
        width: 99%;
        height: 600px;
        margin-top: 10px;
    }

    #left {
        width: 12%;
        border: 1px solid pink;
        float: left;
        height: 500px;
    }

    #cencont {
        width: 86%;
        border: 1px solid pink;
        height: 99%;
        margin-left: 1%;
        float: left;
        overflow: hidden
    }

    #querylable {
        width: 110px;
    }

    #cencontleft, #cencontright {
        width: 99%;
        height: 150px;
        margin: 0 auto;
        margin-top: auto;
        line-height: 200px;
    }

    #aisle {
        width: 99%;
        height: 75px;
        text-align: center;
        position: relative;
    }

    #spanaisle {
        position: absolute;
        bottom: 0px;
        font-size: 22px;
    }

    .room {
        width: 10.00%;
        height: 45px;
        margin-left: 5px;
        float: left;
        display: inline-block; /*一定要将div设置为inline-block*/
        vertical-align: middle; /*设置该元素在父元素中的位置*/
        line-height: 45px;
        text-align: center;
        margin-top: 9px;
    }

    .roomdiv {
        width: 91%;
        height: 99%;
        float: left;
        line-height: 99%;
    }

    .btnadddiv {
        width: 8%;
        height: 88%;
        float: left;
    }

    .accommodate {
        width: 99%;
        height: 110px;
        display: inline-block; /*一定要将div设置为inline-block*/
        vertical-align: middle; /*设置该元素在父元素中的位置*/
        line-height: 60px;
        text-align: center;
    }
</style>
<div id="top">
    <form class="layui-form" action="">
        <div class="layui-form-item">

            <div class="layui-inline">
                <button class="layui-btn layui-btn-radius layui-btn-normal">添加栋</button>
            </div>
            <div class="layui-inline">
                <button class="layui-btn layui-btn-radius layui-btn-normal">添加楼层</button>
            </div>

            <div class="layui-inline">
                <label class="layui-form-label" id="querylable">搜索选择框</label>
                <div class="layui-input-inline">
                    <select name="modules" lay-verify="required" lay-search="">
                        <option value="">直接选择或搜索选择</option>
                        <option value="1">学生名字</option>
                        <option value="2">寝室号</option>
                    </select>
                </div>
                <div class="layui-input-inline">
                    <input type="text" name="username" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                </div>

                <button class="layui-btn layui-btn-radius layui-btn-normal layui-btn" lay-submit="" lay-filter="demo1">搜索</button>
            </div>

        </div>
    </form>

</div>
<div id="bottom">
    <div id="left">
        <div id="test4" class="demo-tree"></div>
    </div>

    <div id="cencont">
        <div id="cencontleft">
            <div class="accommodate">
                <div class="roomdiv">
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2001</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2002</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2003</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2004</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2005</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2006</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2007</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2008</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2009</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2010</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2011</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2012</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2013</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2014</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2015</button></div>

                </div>
                <div class="btnadddiv">
                    <button class="layui-btn layui-btn-radius layui-btn-normal">添加房间</button>
                </div>
            </div>
        </div>
        <div id="aisle">
            <div class="roomdiv">
                <span id="spanaisle">过道</span>
            </div>
            <div class="btnadddiv">

            </div>

        </div>
        <div id="cencontright">
            <div class="accommodate">
                <div class="roomdiv">
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2001</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2002</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2003</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2004</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2005</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2006</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2007</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2008</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2009</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2010</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-danger  layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2011</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-danger  layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2012</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-danger  layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2013</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-danger  layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-female"></i>D2014</button></div>
                    <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2015</button></div>
                </div>
                <div class="btnadddiv">
                    <button class="layui-btn layui-btn-radius layui-btn-normal">添加房间</button>
                </div>
            </div>
        </div>
    </div>
</div>


@*<div id="right">

    </div>*@


@section script{
    <script>


        var jstungid;
        var jsfloorid;
        var mytree;
        $(function () {
            loadtree();
            loadroom(jstungid,jsfloorid);
        });


        layui.use(['form', 'layedit', 'laydate', 'tree'], function () {
            var form = layui.form;
            var tree = layui.tree;
            mytree = tree;
            //手风琴模式
            tree.render({
                elem: '#test4'
                , id: 'tungtree'
                , accordion: true
                , onlyIconControl: true
                //是否显示复选框
                , showCheckbox: true
                //add、update、del
                , edit: ['add', 'update', 'del']
                , click: function (obj) {
                    //console.log(obj.data.id); //得到当前点击的节点数据
                    //console.log(obj.state); //得到当前节点的展开状态：open、close、normal
                    //console.log(obj.elem); //得到当前节点元素
                    //console.log(obj.data.children); //当前节点下是否有子节点

                }
                , showLine: false
            });
        });

        //加载树
        function loadtree() {
            $.ajax({
                url: '/Dormitory/DormitoryInfo/EstablishTree',
                type: 'GET',
                success: function (successdata) {
                    console.log(successdata);
                     // var nodes = JSON.parse(successdata);
                    //console.log(nodes);
                    //可以重载所有基础参数
                    mytree.reload(
                        'tungtree',
                        {
                            data:successdata

                        });
                },
                error: function (errordata) {

                }
            });
        }

        function loadroom(tungid, floorid) {
            $.ajax({
                url: '/Dormitory/DormitoryInfo/EstablishRoom',
                type: 'GET',
                data: { TungID: tungid, FloorID: floorid },
                datatype:'json',
                success: function (successdata) {
                    console.log(successdata);
                  
                },
                error: function (errordata) {

                }
            });
        }
    </script>
}


