
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>layui.dtree帮助手册</title>

    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <link href="~/Scripts/layui/css/layui.css" rel="stylesheet" />
    <script src="~/Scripts/layui/layui.js"></script>
    <link href="~/Scripts/dtree2.5.4/layui_ext/dtree/dtree.css" rel="stylesheet" />
    <link href="~/Scripts/dtree2.5.4/layui_ext/dtree/font/dtreefont.css" rel="stylesheet" />

 
</head>

<body>
    <script>
        $.ajax({
            url: '../../../xmlfile/RoomdeWithPage.xml',
            type: 'GET',
            dataType: 'xml',
            success: function (xmlDoc, textStatus) {
                console.log(xmlDoc);
                console.log(textStatus);
                $(xmlDoc).find("data").each(function (i) {
                    var obj = new Object();
                    var oid = $(this).attr("id");
                    var lower = $(this).children("name").text();
                    var upper = $(this).children("age").text();
                    obj.oid = oid;
                    obj.lower = lower;
                    obj.upper = upper;
                    console.log(obj);
                });
 
            }
        });
    </script>

    @*<div style="height: 350px;overflow: auto;" id="toolbarDiv5">
            <ul id="toolbarTree5" class="dtree" data-id="0"></ul>
        </div>

        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2001</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2002</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2003</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2004</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2005</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2006</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2007</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2008</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2009</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2010</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2011</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2012</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2013</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2014</button></div>
        <div class="room"><button type="button" class="layui-btn layui-btn-primary layui-btn-radius layui-btn-sm"><i class=" layui-icon layui-icon-male"></i>D2015</button></div>
        <script>

            layui.extend({
                dtree: '{/}/Scripts/dtree2.5.4/layui_ext/dtree/dtree'
            }).use(['element', 'layer', 'table', 'code', 'util', 'dtree', 'form'], function () {

                var element = layui.element, layer = layui.layer, table = layui.table, util = layui.util, dtree = layui.dtree, form = layui.form, $ = layui.$;

                var DTree5 = dtree.render({
                    elem: "#toolbarTree5",
                    data: [{
                        "id": "001",
                        "title": "湖南省",
                        "last": false,
                        "parentId": "0",
                        "children": [{
                            "id": "001001",
                            "title": "长沙市",
                            "last": true,
                            "parentId": "001",
                            "level": "2"
                        }, {
                            "id": "001002",
                            "title": "株洲市",
                            "last": true,
                            "parentId": "001",
                            "level": "2"
                        }, {
                            "id": "001003",
                            "title": "湘潭市",
                            "last": true,
                            "parentId": "001",
                            "level": "2"
                        }, {
                            "id": "001004",
                            "title": "衡阳市",
                            "last": true,
                            "parentId": "001",
                            "level": "2"
                        }, {
                            "id": "001005",
                            "title": "郴州市",
                            "last": true,
                            "parentId": "001",
                            "level": "2"
                        }]
                    }, {
                        "id": "002",
                        "title": "湖北省",
                        "last": false,
                        "parentId": "0",
                        "level": "1",
                        "children": [{
                            "id": "002001",
                            "title": "武汉市",
                            "last": true,
                            "level": "2"
                        }, {
                            "id": "002002",
                            "title": "黄冈市",
                            "last": true,
                            "parentId": "002",
                            "level": "2"
                        }, {
                            "id": "002003",
                            "title": "潜江市",
                            "last": true,
                            "parentId": "002",
                            "level": "2"
                        }, {
                            "id": "002004",
                            "title": "荆州市",
                            "last": true,
                            "parentId": "002",
                            "level": "2"
                        }, {
                            "id": "002005",
                            "title": "襄阳市",
                            "last": true,
                            "parentId": "002",
                            "level": "2"
                        }]
                    }, {
                        "id": "003",
                        "title": "广东省",
                        "last": false,
                        "parentId": "0",
                        "level": "1",
                        "children": [{
                            "id": "003001",
                            "title": "广州市",
                            "last": false,
                            "parentId": "003",
                            "level": "2",
                            "children": [{
                                "id": "003001001",
                                "title": "天河区",
                                "last": true,
                                "parentId": "003001",
                                "level": "3"
                            }, {
                                "id": "003001002",
                                "title": "花都区",
                                "last": true,
                                "parentId": "003001",
                                "level": "3"
                            }]
                        }, {
                            "id": "003002",
                            "title": "深圳市",
                            "last": true,
                            "parentId": "003",
                            "level": "2"
                        }, {
                            "id": "003003",
                            "title": "中山市",
                            "last": true,
                            "parentId": "003",
                            "level": "2"
                        }, {
                            "id": "003004",
                            "title": "东莞市",
                            "last": true,
                            "parentId": "003",
                            "level": "2"
                        }, {
                            "id": "003005",
                            "title": "珠海市",
                            "last": true,
                            "parentId": "003",
                            "level": "2"
                        }, {
                            "id": "003006",
                            "title": "韶关市",
                            "last": true,
                            "parentId": "003",
                            "level": "2"
                        }]
                    }, {
                        "id": "004",
                        "title": "浙江省",
                        "last": false,
                        "level": "1",
                        "parentId": "0",
                        "children": [{
                            "id": "004001",
                            "title": "杭州市",
                            "last": true,
                            "parentId": "004",
                            "level": "2"
                        }, {
                            "id": "004002",
                            "title": "温州市",
                            "last": true,
                            "parentId": "004",
                            "level": "2"
                        }, {
                            "id": "004003",
                            "title": "绍兴市",
                            "last": true,
                            "parentId": "004",
                            "level": "2"
                        }, {
                            "id": "004004",
                            "title": "金华市",
                            "last": true,
                            "parentId": "004",
                            "level": "2"
                        }, {
                            "id": "004005",
                            "title": "义乌市",
                            "last": true,
                            "parentId": "004",
                            "level": "2"
                        }]
                    }, {
                        "id": "005",
                        "title": "福建省",
                        "last": false,
                        "parentId": "0",
                        "level": "1",
                        "children": [{
                            "id": "005001",
                            "title": "厦门市",
                            "last": true,
                            "parentId": "005",
                            "level": "2"
                        }]
                    }]
                    ,
                    toolbar: true,
                    scroll: "#toolbarDiv5",
                    toolbarShow: [], // 默认按钮制空
                    toolbarExt: [{
                        toolbarId: "testAdd", icon: "dtree-icon-wefill", title: "自定义新增", handler: function (node, $div) {
                            layer.msg(JSON.stringify(node));
                            // 你可以在此添加一个layer.open，里面天上你需要添加的表单元素，就跟你写新增页面是一样的
                            layer.open({
                                success: function (layero, index) {
                                    form.render();
                                    form.on("submit(addNode_form)", function (data) {// 假设form的filter为addNode_form
                                        console.log(data.field);// 从form中取值，数据来源由你自己定

                                        var json = { "id": data.field.addId, "title": data.field.addNodeName, "parentId": node.nodeId };
                                        var arr = [{ "id": data.field.addId, "title": data.field.addNodeName, "parentId": node.nodeId }];
                                        //DTree5.partialRefreshAdd($div); // 省略第二个参数，则会加载url
                                        //DTree5.partialRefreshAdd($div, json); // 如果是json对象，则会追加元素
                                        //DTree5.partialRefreshAdd($div, arr); //如果是json数组，则会重载节点中的全部子节点

                                        layer.close(index);
                                        return false;
                                    });
                                }
                            })
                        }
                    },
                    {
                        toolbarId: "testEdit", icon: "dtree-icon-bianji", title: "自定义编辑", handler: function (node, $div) {
                            layer.msg(JSON.stringify(node));
                            // 你可以在此添加一个layer.open，里面天上你需要添加的表单元素，就跟你写编辑页面是一样的
                            layer.open({
                                success: function (layero, index) {
                                    form.render();
                                    form.on("submit(editNode_form)", function (data) {// 假设form的filter为editNode_form
                                        console.log(data.field);// 从form中取值，数据来源由你自己定

                                        var json = { "id": data.field.addId, "title": data.field.addNodeName, "parentId": node.nodeId };
                                        //DTree5.partialRefreshEdit($div, data.field.addNodeName); // 如果是字符串，则会更新文本内容
                                        //DTree5.partialRefreshEdit($div, json); // 如果是json对象，则会更新节点的其他属性

                                        layer.close(index);
                                        return false;
                                    });
                                }
                            })
                        }
                    },
                    {
                        toolbarId: "testDel", icon: "dtree-icon-roundclose", title: "自定义删除", handler: function (node, $div) {
                            layer.msg(JSON.stringify(node));
                            DTree5.partialRefreshDel($div); // 这样即可删除节点
                        }
                    }]
                });
            });







                            //var DTree5 = dtree.render({
                    //    elem: "#toolbarTree5",
                    //    url: '/Dormitory/DormitoryInfo/EstablishTree',
                    //    toolbar: true,
                    //    scroll: "#toolbarDiv5",
                    //    toolbarShow: [], // 默认按钮制空
                    //    toolbarExt: [
                    //        {
                    //            toolbarId: "testAdd", icon: "dtree-icon-wefill", title: "自定义新增", handler: function (node, $div) {
                    //                layer.msg(JSON.stringify(node));
                    //                // 你可以在此添加一个layer.open，里面天上你需要添加的表单元素，就跟你写新增页面是一样的
                    //                layer.open({
                    //                    content: 'test',
                    //                    success: function (layero, index) {
                    //                        form.render();
                    //                        form.on("submit(addNode_form)", function (data) {// 假设form的filter为addNode_form
                    //                            console.log(data.field);// 从form中取值，数据来源由你自己定

                    //                            var json = { "id": data.field.addId, "title": data.field.addNodeName, "parentId": node.nodeId };
                    //                            var arr = [{ "id": data.field.addId, "title": data.field.addNodeName, "parentId": node.nodeId }];
                    //                            //DTree5.partialRefreshAdd($div); // 省略第二个参数，则会加载url
                    //                            //DTree5.partialRefreshAdd($div, json); // 如果是json对象，则会追加元素
                    //                            //DTree5.partialRefreshAdd($div, arr); //如果是json数组，则会重载节点中的全部子节点

                    //                            layer.close(index);
                    //                            return false;
                    //                        });
                    //                    }
                    //                })
                    //            }
                    //        },
                    //        {
                    //            toolbarId: "testEdit", icon: "dtree-icon-bianji", title: "自定义编辑", handler: function (node, $div) {
                    //                layer.msg(JSON.stringify(node));
                    //                // 你可以在此添加一个layer.open，里面天上你需要添加的表单元素，就跟你写编辑页面是一样的
                    //                layer.open({
                    //                    success: function (layero, index) {
                    //                        form.render();
                    //                        form.on("submit(editNode_form)", function (data) {// 假设form的filter为editNode_form
                    //                            console.log(data.field);// 从form中取值，数据来源由你自己定

                    //                            var json = { "id": data.field.addId, "title": data.field.addNodeName, "parentId": node.nodeId };
                    //                            //DTree5.partialRefreshEdit($div, data.field.addNodeName); // 如果是字符串，则会更新文本内容
                    //                            //DTree5.partialRefreshEdit($div, json); // 如果是json对象，则会更新节点的其他属性

                    //                            layer.close(index);
                    //                            return false;
                    //                        });
                    //                    }
                    //                })
                    //            }
                    //        },
                    //        {
                    //            toolbarId: "testDel", icon: "dtree-icon-roundclose", title: "自定义删除", handler: function (node, $div) {
                    //                layer.msg(JSON.stringify(node));
                    //                DTree5.partialRefreshDel($div); // 这样即可删除节点
                    //            }
                    //        }],
                    //    loadToolbarBefore: function (buttons, param, $div) {
                    //          console.log("11");
                    //        if (param.leaf) { // 如果是叶子节点
                    //            buttons.testAdd = "添加楼层";  // 取消新增功能

                    //        }
                    //        return buttons; // 将按钮对象返回
                    //    }

                    //});
        </script>*@
</body>

</html>
