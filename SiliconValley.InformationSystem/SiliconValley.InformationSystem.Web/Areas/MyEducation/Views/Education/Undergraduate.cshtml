
@{
    ViewBag.Title = "Undergraduate";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section style{
    <style>
    </style>
}
<div>
    <table class="layui-hide" id="test" lay-filter="test"></table>
</div>
@section script{
    @*头部工具栏*@
    <script type="text/html" id="toolbarDemo">
        <div class="layui-btn-container">
            <button class="layui-btn layui-btn-sm" lay-event="UpdaEnrollment"><i class="layui-icon">&#xe654;</i>补充学员完整信息</button>
            <button class="layui-btn layui-btn-sm" lay-event="AddUndergraduatemajor"> <i class="layui-icon">&#xe642;</i>新增本科专业</button>
            <button class="layui-btn layui-btn-sm" lay-event="AddUndergraduateschool"> <i class="layui-icon">&#xe642;</i>新增报考学校</button>
            <button class="layui-btn layui-btn-sm" lay-event="AddCoursecategory"> <i class="layui-icon">&#xe642;</i>新增上级本科课程类别</button>
            <button class="layui-btn layui-btn-sm" lay-event="AddCoursecategoryX"> <i class="layui-icon">&#xe642;</i>新增下级本科课程类别</button>

            <button class="layui-btn layui-btn-sm" lay-event="Addcurriculum"> <i class="layui-icon">&#xe642;</i>添加本科课程</button>

            <button class="layui-btn layui-btn-sm" lay-event="AddRegisterforexamination"> <i class="layui-icon">&#xe642;</i>学员报考课程</button>
            <button class="layui-btn layui-btn-sm" lay-event="AddUndergraduateachievement"> <i class="layui-icon">&#xe642;</i>本科成绩录入</button>
        </div>
    </script>
    <script>
        layui.use(['table', 'layer', 'tree', 'form'], function () {
            var table = layui.table;
            var layer = layui.layer;
            var form = layui.form;
            var tree = layui.tree;

            //表格渲染
            table.render({
                elem: '#test'
                , url: '/MyEducation/Education/GetDate'
                , toolbar: '#toolbarDemo'
                , id: 'idTest'
                , page: true
                , cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
                , cols: [[
                    { type: 'radio' }
                    , { field: 'PassNumber', title: '考藉号' }
                    , { field: 'StudentNumber', title: '学号', sort: true }
                    , { field: 'Name', title: '姓名' }


                    , { field: 'ClassName', title: '班级名称 ' }
                    , { field: 'identitydocument', title: '身份证号码' }
                    , { field: 'School', title: '报考学校' }
                    , { field: 'MajorID', title: '报考专业' }
                    , { field: 'Headmasters', title: '班主任 ', width: 100 }
                    , { fixed: 'right', title: '操作', toolbar: '#barDemo', width: 100 }
                ]]
                , page: true
                , limit: 8
                , limits: [8, 10, 15]
            });

            function AddUnderGrad(titles,url,width,hengt) {
               
                layer.open({
                    title: titles,
                    type: 2,
                    area: [width + 'px', hengt+'px']
                    , content: url

                    , anim: 1
                    , end: function () { table.reload('idTest'); }
                    //这里content是一个DOM，注意：最好该元素要存放在body最外层，否则可能被其它的相对元素所影响
                });
            }
            //监听头部工具栏/MyEducation/Education/UpdaEnrollment
            table.on('toolbar(test)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id);
                switch (obj.event) {
                    case 'AddUndergraduatemajor':
                        var a = "添加本科专业"

                        AddUnderGrad(a,"/MyEducation/Education/AddUndergraduatemajor",500,300);
                        break;
                    case 'AddUndergraduateschool':
                        var a = "添加报考学校"

                        AddUnderGrad(a, "/MyEducation/Education/AddUndergraduateschool", 500, 300);
                        break;
                    case 'AddCoursecategory':

                        ///MyEducation/Education/AddCoursecategory
                        var a = "添加上级本科课程类别"

                        AddUnderGrad(a, "/MyEducation/Education/AddCoursecategory", 500, 400);
                        break;
                    case 'AddCoursecategoryX':

                        ///MyEducation/Education/AddCoursecategory
                        var a = "添加下级本科课程类别"

                        AddUnderGrad(a, "/MyEducation/Education/AddCoursecategoryX", 500, 400);
                        break;
                    case "UpdaEnrollment":

                        if (checkStatus.data.length > 0) {

                            var id = checkStatus.data[0].StudentNumber;
                            var a = "补充本科学员信息"

                            AddUnderGrad(a, "/MyEducation/Education/UpdaEnrollment/" + id, 550, 700);
                        } else {
                            layer.alert('请选择一条数据', { icon: 0 });
                        }
                        break;
                    case "Addcurriculum":
                        //
                        var a = "添加本科课程"

                        AddUnderGrad(a, "/MyEducation/Education/curriculum", 550, 550);
                        break;
                    case "AddRegisterforexamination":
                        var a = "本科报考"
                        if (checkStatus.data.length > 0) {
                            var id = checkStatus.data[0].StudentNumber;
                            AddUnderGrad(a, "/MyEducation/Education/Registerforexamination/" + id, 550, 850);
                          
                        } else {
                            layer.alert('请选择一条数据', { icon: 0 });
                        }
                        break;
                    case "AddUndergraduateachievement":
                        var a = "本科成绩录入"
                        if (checkStatus.data.length > 0) {
                            var id = checkStatus.data[0].StudentNumber;
                            AddUnderGrad(a, "/MyEducation/Education/AddUndergraduateachievement/" + id, 550, 550);

                        } else {
                            layer.alert('请选择一条数据', { icon: 0 });
                        }
                        break;
                    //AddUndergraduateachievement

                };
            });
          
        });
        //弹出层
        function StudentShow(url, mytitle, mycloseBtn, width, hegin) {
            layui.use('layer', function () {
                var layer = layui.layer;
                layer.open({
                    type: 2,
                    content: url
                    , area: [width + 'px', hegin + 'px'],
                    title: mytitle
                    , shade: 0.3
                    , anim: 1
                    , closeBtn: mycloseBtn
                });
            });
        }
    </script>
}

