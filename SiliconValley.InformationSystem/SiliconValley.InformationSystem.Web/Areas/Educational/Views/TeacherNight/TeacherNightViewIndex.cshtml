
@{
    ViewBag.Title = "TeacherNightViewIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section style{
    <style>
        body .demo-class .layui-layer-title
        {
            background: #009688;
            color: #fff;
            border: none;
        }
    </style>
}
<table id="TeacherNight_table" lay-filter="TeacherNight_table"></table>
<script type="text/html" id="toolbarDemo_Night">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm" lay-event="getCheckData_addNight">添加值班数据</button>
        <button class="layui-btn layui-btn-sm" lay-event="getCheckData_timeChange">日期调换</button>
        <button class="layui-btn layui-btn-sm" lay-event="getCheckData_time">调课</button>
    </div>
</script>

<script type="text/html" id="barDemo_Night">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>


@section script{
    <script>
        function TableFulsh() {
            layui.use('table', function () {
                var table = layui.table;
                table.reload('TeacherNight_table');
            });
        }
        layui.use('table', function () {
            var table = layui.table;
            var layer = layui.layer;
            table.render({
                elem: '#TeacherNight_table'
                , url: '/Educational/TeacherNight/TeacherTableData'
                , toolbar: '#toolbarDemo_Night' //开启头部工具栏，并为其绑定左侧模板
                , cols: [[
                    { type: 'radio ', fixed: 'left' }
                    , { field: 'OrwatchDate', title: '值班日期' }      
                    , { field: 'TearcherName', title: '值班老师'}  
                    , { field: 'ClassNumber', title: '班级' }
                    , { field: 'ClassroomName', title: '教室'}                         
                    , { field: 'Rmark', title: '备注'}                  
                    , { fixed: 'right', title: '操作', toolbar: '#barDemo_Night', width: 150 }
                ]]
                , page: true
            });

            //头工具栏事件
            table.on('toolbar(TeacherNight_table)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id);
                switch (obj.event) {
                    case 'getCheckData_addNight':
                        layer.open({
                            type: 2,
                            content: '/Educational/TeacherNight/AddDataView'
                            , area: ['800px', '500px'],
                            title: '添加值班数据页面'
                            , shade: 0.8
                            , anim: 4
                            , skin: 'demo-class'
                        });
                        break;
                    case 'getCheckData_timeChange':
                         
                        break;
                    case 'getCheckData_time':
                         
                        break;
                    
                };
            });

            //监听行工具事件
            table.on('tool(TeacherNight_table)', function (obj) {
                var data = obj.data;
                //console.log(obj)
                if (obj.event === 'del') {
                    layer.confirm('真的删除行么', function (index) {
                        obj.del();
                        layer.close(index);
                    });
                } else if (obj.event === 'edit') {
                    layer.prompt({
                        formType: 2
                        , value: data.email
                    }, function (value, index) {
                        obj.update({
                            email: value
                        });
                        layer.close(index);
                    });
                }
            });
        });
    </script>
}

