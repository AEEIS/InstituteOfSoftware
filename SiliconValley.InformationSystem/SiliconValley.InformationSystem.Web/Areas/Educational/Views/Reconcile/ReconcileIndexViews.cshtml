
@{
    ViewBag.Title = "ReconcileIndexViews";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section style{
    <style>
        #but1
        {
            position: absolute;
            top: 13%;
            left: 35%;
            width: 36px;
            height: 36px;
            text-align: center;
            line-height: 36px;
        }

            #but1:hover
            {
                background-color: aqua;
            }

        #Nation
        {
            width: 100px;
        }

        .linu
        {
            width: 200px;
        }

        .mm
        {
            border: 1px solid black;
        }

        .LableCss1
        {
            text-overflow: ellipsis;
            white-space: nowrap;
            float: left;
            display: block;
            padding: 9px 15px;
            width: 80px;
            font-weight: 400;
            line-height: 20px;
            text-align: right
        }

        .TextAreCss1
        {
            height: 80px;
        }

        .butCss1
        {
            float: right;
            margin-right: 100px;
        }

        .butCss2
        {
            border: 0px solid black;
        }

        .layButCss1
        {
            display: inline-block;
            height: 38px;
            line-height: 38px;
            padding: 0 18px;
            background-color: #009688;
            color: #fff;
            white-space: nowrap;
            text-align: center;
            font-size: 14px;
            border: none;
            border-radius: 2px;
            cursor: pointer;
            border: 0px solid #C9C9C9;
            background-color: #fff;
            color: #555;
            height: 18px;
            line-height: 18px
        }

        .layui-unselect
        {
            width: 130px;
            border-radius: 5px;
        }
    </style>
}

<form class="layui-form">
    <div class="layui-row layui-form-item">
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <label class="layui-form-label">阶段:</label>
            <div class="layui-input-block">
                @Html.DropDownList("mygrand", ViewBag.grandlist as IEnumerable<SelectListItem>, new Dictionary<string, object>() { { "class", "linu" }, { "lay-filter", "grandselect" } })
            </div>
        </div>
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <label class="layui-form-label">班级:</label>
            <div id="myclass" class="layui-input-block">

            </div>
        </div>
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <label class="layui-form-label">专业:</label>
            <div id="marjon" class="layui-input-block">
                
            </div>
        </div>
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <label class="layui-form-label">教室:</label>
            <div class="layui-input-block">
                
            </div>
        </div>
    </div>
    <div class="layui-row layui-form-item">
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <label class="layui-form-label">课程:</label>
            <div class="layui-input-block">

            </div>

        </div>
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <label class="LableCss1">上课时间段:</label>
            <div id="ClssTime" class="layui-input-block">

            </div>
        </div>
        <div class="layui-col-xs3 layui-col-sm3 layui-col-md3">
            <input type="button" class="layui-btn" value="排课" />
        </div>
    </div>
    <fieldset>
        <legend>排课显示</legend>
        <table id="Reconcile_table"></table>
    </fieldset>
</form>
@section script{
    <script>        
        layui.use(['form'], function () {
            var form = layui.form;
            form.on('select(grandselect)', function (data) {
                if (data.value == "0") {

                } else {
                    $.ajax({
                        url: '/Educational/Reconcile/GetClassScheduleSelect/' + data.value,
                        success: function (sudata) {
                            //获取班级slect
                            var classselect = $('<select id="class_select" class="layui-select" lay-filter="bianji"><option value="0" selected>--请选择--</select>');
                            for (var i = 0; i < sudata.length; i++) {
                                $('<option value=' + sudata[i].ClassNumber + '>' + sudata[i].ClassNumber+ '<option>').appendTo(classselect);
                            }
                            $("#myclass")[0].innerHTML = "";
                            $("#myclass").append(classselect);
                            form.render(); //更新全部
                        }
                    });
                }
                
            });      

            form.on('select(bianji)', function (data) {
                alert(data.value);
            })
        });
    </script>
}

