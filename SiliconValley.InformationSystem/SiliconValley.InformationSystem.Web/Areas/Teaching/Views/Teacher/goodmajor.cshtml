
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>goodmajor</title>
    <link href="~/Scripts/layui/css/layui.css" rel="stylesheet" />
</head>
<body>
    <div>
        <input type="hidden" id="teacherid" value="@ViewBag.Teacher.TeacherID" />
        @{

            foreach (var item in ViewBag.majors)
            {
                <div class="layui-collapse" lay-filter="filter">
                    <div class="layui-colla-item">
                        <h2 class="layui-colla-title" majorid="@item.Id">@item.SpecialtyName</h2>

                        <div class="layui-colla-content">

                            <button class="layui-btn layui-btn-primary">课程名称</button>

                        </div>
                    </div>
                </div>
            }
        }


    </div>
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/layui/layui.js"></script>
    <script src="~/Areas/Teaching/Scripts/Ajax.js"></script>


    <script>
        layui.use(['element', 'layer'], function () {

            var element = layui.element;
            var layer = layui.layer;
            element.on('collapse(filter)', function (data) {
                console.log(data.show); //得到当前面板的展开状态，true或者false
                console.log(data.title); //得到当前点击面板的标题区域DOM对象
                console.log(data.content); //得到当前点击面板的内容区域DOM对象


                //获取专业id
                var majorid = data.title[0].attributes["majorid"].nodeValue;

                var teacherid = $("#teacherid").val();
                //发送请求

                Ajax("/teaching/teacher/GetCurcousData", { teacherid: teacherid, majorid: majorid }, "post", function (result) {

                    if (result.ErrorCode == 200) {

                        ///成功 渲染数据





                    } else {
                        layer.msg("抱歉！系统繁忙.......");
                    }


                }, function (error) {

                    layer.msg("抱歉！网络好像出现了一点小问题......");

                    });

                
            });


        });



    </script>
</body>
</html>
