
@{
    Layout = null;
}
@model SiliconValley.InformationSystem.Entity.ViewEntity.Sch_Market
@using SiliconValley.InformationSystem.Entity.ViewEntity
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Sch_MarketEdit</title>
    <link href="~/Scripts/layui/css/layui.css" rel="stylesheet" />
    <style>
        .linu
        {
            width: 200px;
        }

        .LableCss1
        {
            text-overflow: ellipsis;
            white-space: nowrap;
            float: left;
            display: block;
            padding: 9px 15px;
            width: 80px;
            font-weight: 400;
            line-height: 20px;
            text-align: right
        }

        .TextAreCss1
        {
            height: 48px;
            width: 91%;
        }

        body .demo-class .layui-layer-title
        {
            background: #009688;
            color: #fff;
            border: none;
        }

        .layui-unselect
        {
            width: 200px;
        }

        .NoneCss
        {
            display: none;
        }
    </style>
</head>
<body>
    <div style="margin:20px auto;width:90%;">
        <form class="layui-form" lay-filter="myform2" style="width:98%;margin:0px auto;">
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">姓 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 名:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.StudentName" name="StudentName" />
                        <input type="hidden" name="Id" class="layui-input linu" value="@Model.Id" disabled="disabled"/>
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">性 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 别:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.Sex" name="Sex" />
                    </div>
                </div>
            </div>
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">电 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 话:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.Phone" name="Phone" />
                    </div>
                </div>
                @*<div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="LableCss1">信息来源:</label>
                    <div class="layui-input-block">

                        <input class="layui-input linu" value="@Model.Source" name="Source" id="Source" />
                        <i onclick="Infomation()" class="layui-icon" style="font-size:25px; position:absolute;left:170px;top:10px;cursor:pointer">&#xe615;</i>
                    </div>
                </div>*@
            </div>
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="LableCss1">学校名称</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.School" name="School" />
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">学 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 历:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.Education" name="Education" />
                    </div>

                </div>
            </div>
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="LableCss1">市场类型:</label>
                    <div class="layui-input-block">
                        <div><input class="layui-input linu" disabled="disabled" value="@Model.MarketType" name="MarketType" id="MarketType" /><i onclick="MychangMarketType()" class="layui-icon" style="font-size:25px; position:absolute;left:170px;top:10px;cursor:pointer">&#xe615;</i></div>
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="LableCss1">咨询 &nbsp; 师:</label>
                    <input name="TeacherId" id="TeacherId" type="hidden" />
                    <div class="layui-input-block">
                        <div>
                            <input class="layui-input linu" disabled="disabled" value="@Model.Inquiry" name="Inquiry" id="Inquiry" />
                            <i onclick="MychangTeacher()" class="layui-icon" style="font-size:25px; position:absolute;left:170px;top:10px;cursor:pointer">&#xe615;</i>
                        </div>
                    </div>
                </div>
            </div>
            @*<div class="layui-row layui-form-item">
                <div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
                    <label class="layui-form-label">市场人员:</label>
                    <div class="layui-input-block">
                        <div>
                            <input class="layui-input" disabled="disabled" value="@Model.SalePerson" name="SalePerson" id="SalePerson" style="width:88%"/>
                            <i onclick="MychangMarketPerson()" class="layui-icon" style="font-size:25px; position:absolute;left:80%;top:10px;cursor:pointer">&#xe615;</i>
                        </div>
                    </div>
                </div>
            </div>*@
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">区 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 域:</label>
                    <div class="layui-input-block">
                        <div>
                            <input name="regin" id="regin" class="layui-input linu" value="@ViewBag.regin" disabled="disabled">
                            <i onclick="Region()" class="layui-icon" style="font-size:25px; position:absolute;left:170px;top:10px;cursor:pointer">&#xe615;</i>
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">关&nbsp; 系&nbsp;人:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.RelatedPerson" name="RelatedPerson" />
                    </div>
                </div>

            </div>
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="LableCss1">备案年龄:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.Age" name="Age" />
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <label class="layui-form-label">Q &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Q:</label>
                    <div class="layui-input-block">
                        <input class="layui-input linu" value="@Model.QQ" name="QQ" />
                    </div>
                </div>

            </div>
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
                    <label class="layui-form-label">说 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 明:</label>
                    <div class="layui-input-block">
                        <textarea style="height: 50px;width:93%" name="Remark" class="layui-input">@Model.Remark</textarea>
                    </div>
                </div>
            </div>
            <div class="layui-row layui-form-item">
                <div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
                    <label class="layui-form-label">跟踪内容:</label>
                    <div class="layui-input-block">
                        <textarea style="height: 50px;width:93%" name="Info" class="layui-input">@Model.Info</textarea>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <div style="width:30%;margin:0px auto">
                        <button class="layui-btn" lay-submit="" lay-filter="xiugai">修改</button>
                        <button type="button" class="layui-btn" id="quxiao">取消</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div id="TeacherDiv" class="NoneCss">
        <form class="layui-form" lay-filter="teacherselect_form">
            <div class="layui-row">
                @{
                    List<Emp_consult> list = ViewBag.selectconsult as List<Emp_consult>;
                    foreach (Emp_consult item in list)
                    {
                        <input type="radio" name="consultTeacherid" id="" value="@item.consultercherid" title="@item.empname">
                    }
                }
            </div>
            <div style="text-align:center;margin-top:20px"><button type="button" class="layui-btn" lay-submit lay-filter="truebtn">确定</button></div>
        </form>
    </div>

    <div id="MarketDiv" class="NoneCss">
        <form class="layui-form" lay-filter="marketselect_form">
            <div class="layui-row">
                <input type="radio" name="marketName" id="" value="A类" title="A类">
                <input type="radio" name="marketName" id="" value="B类" title="B类">
                <input type="radio" name="marketName" id="" value="C类" title="C类">
                <input type="radio" name="marketName" id="" value="D类" title="D类">
            </div>
            <div style="text-align:center;margin-top:20px"><button type="button" class="layui-btn" lay-submit lay-filter="truebtn2">确定</button></div>
        </form>
    </div>
    
    <div id="MarkpersonDiv" class="NoneCss">
        <form class="layui-form" lay-filter="markpersonselect_form">
            <div class="layui-row">
                @{
                    List<SelectListItem> list2 = ViewBag.empmarket as List<SelectListItem>;
                    foreach (SelectListItem item in list2)
                    {
                        <input type="radio" name="marketPerName" id="marketPerName" value="@item.Value" title="@item.Value">
                    }
                }
            </div>
            <div style="text-align:center;margin-top:20px"><button type="button" class="layui-btn" lay-submit lay-filter="truebtn3">确定</button></div>
        </form>
    </div>
   
    <div id="ReginDiv" class="NoneCss">
        <form class="layui-form" lay-filter="reginselect_form">
            <div class="layui-row">
                @{
                    List<SelectListItem> list3 = ViewBag.region as List<SelectListItem>;
                    foreach (SelectListItem item in list3)
                    {
                        <input type="radio" name="Reginvalue" id="" value="@item.Value" title="@item.Value">
                    }
                }
            </div>
            <div style="text-align:center;margin-top:20px"><button type="button" class="layui-btn" lay-submit lay-filter="truebtn4">确定</button></div>
        </form>
    </div>
    
    <div id="InfomationDiv" class="NoneCss">
        <form class="layui-form" lay-filter="infomationselect_form">
            <div class="layui-row">
                @{
                    List<SelectListItem> list4 = ViewBag.infomation as List<SelectListItem>;
                    foreach (SelectListItem item in list4)
                    {
                        <input type="radio" name="Infomationvalue" id="" value="@item.Value" title="@item.Value">
                    }
                }
            </div>
            <div style="text-align:center;margin-top:20px"><button type="button" class="layui-btn" lay-submit lay-filter="truebtn5">确定</button></div>
        </form>
    </div>
    

    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/layui/layui.js"></script>
    <script>
        var ms = 0;
        layui.use('form', function () {
            var form = layui.form;
            $("#quxiao").click(function () {
                var index = parent.layer.getFrameIndex(window.name);  
                parent.layer.close(index);  

            });

            form.on('submit(xiugai)', function (data) {

                layer.confirm('确定修改吗？已有的数据是不能修改的喔！', { icon: 3, title: '系统温馨提示！' }, function (Myindex) {
                    //do something
                    $.ajax({
                        url: "/Market/Sch_Market/UpdateFunction",
                        data: data.field,
                        type: "POST",
                        success: function (successdata) {
                            if (successdata.Success == true) {
                                layer.msg(successdata.Msg, {
                                    icon: 1,
                                    time: 2000,
                                    shade: 0.8
                                }, function () {
                                    var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                                    parent.layer.close(index); //再执行关闭
                                    window.parent.my_searchBtn();
                                });
                            } else {
                                layer.msg(successdata.Msg, {
                                    icon: 2,
                                    time: 2000 //2秒关闭（如果不配置，默认是3秒）
                                });
                            }

                        }
                    });
                    layer.close(Myindex);
                });

                 
                return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
            });
            //给咨询师赋值
            form.on('submit(truebtn)', function (data) {
                var mm = $('input[name="consultTeacherid"]:checked')[0];
                if ($(mm).attr("title") == undefined) {
                    layer.msg("请选择咨询师");
                } else {
                    $("#Inquiry")[0].value = $(mm).attr("title");
                    $("#TeacherId")[0].value = mm.value;
                    layer.close(ms);   
                }
                 
                return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
            });
            //给市场类型赋值
            form.on('submit(truebtn2)', function (data) {
                var mm = $('input[name="marketName"]:checked')[0];
                if ($(mm).val() == undefined) {
                    layer.msg("请选择市场类型");
                } else {
                    $("#MarketType")[0].value = $(mm).val();
                    layer.close(ms);
                }
                 
                return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
            });
            //给市场人员赋值
            form.on('submit(truebtn3)', function (data) {
                var mm = $('input[name="marketPerName"]:checked')[0];
                if ($(mm).val() == undefined) {
                    layer.msg("请选择市场人员");
                } else {
                    $("#SalePerson")[0].value = $(mm).val();
                    layer.close(ms);
                }
                 
                return false;  
            });
            //给区域赋值
            form.on('submit(truebtn4)', function (data) {
                var mm = $('input[name="Reginvalue"]:checked')[0];
                if ($(mm).val() == undefined) {
                    layer.msg("请选择区域");
                } else {
                    $("#regin")[0].value = $(mm).val();
                    layer.close(ms);
                }
                
                return false;
            });

            //给信息来源赋值
            form.on('submit(truebtn5)', function (data) {
                var mm = $('input[name="Infomationvalue"]:checked')[0];
                if ($(mm).val() == undefined) {
                    layer.msg("请选择信息来源");
                } else {
                    $("#Source")[0].value = $(mm).val();
                    layer.close(ms);
                }
                
                return false;
            });
        });

        function Coom(ele,mytitle) {
            layui.use('layer', function () {
                var layer = layui.layer;
                ms = layer.open({
                    type: 1,
                    title: mytitle,
                    area: ['500px', '300px'],
                    content:  ele
                });
            });
        }

        function MychangTeacher() {
            var a = $('#TeacherDiv');
            var title = '选择咨询师';
            Coom(a, title);
        }

        function MychangMarketType() {
            var b = $('#MarketDiv');
            var title = '选择市场类型';
            Coom(b, title);
        }
       
        function MychangMarketPerson() {
            var c = $('#MarkpersonDiv');
            var title = '选择市场人员';
            Coom(c, title);
        }

        function Region() {
            var d = $('#ReginDiv');
            var title = '选择区域';
            Coom(d, title);
        }

        function Infomation() {
            var e = $('#InfomationDiv');
            var title = '选择信息来源';
            Coom(e, title);
        }

    </script>
</body>
</html>
